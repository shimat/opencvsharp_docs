<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Cv2.EMD Method (InputArray, InputArray, DistanceTypes, InputArray, Single, OutputArray)</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="M:OpenCvSharp.Cv2.EMD(OpenCvSharp.InputArray,OpenCvSharp.InputArray,OpenCvSharp.DistanceTypes,OpenCvSharp.InputArray,System.Single@,OpenCvSharp.OutputArray)" /><meta name="Description" content="Computes the &quot;minimal work&quot; distance between two weighted point configurations. The function computes the earth mover distance and/or a lower boundary of the distance between the two weighted point configurations." /><meta name="Microsoft.Help.ContentType" content="Reference" /><meta name="BrandingAware" content="true" /><meta name="container" content="OpenCvSharp" /><meta name="file" content="980c9599-0cb2-a1cc-8322-850700753045" /><meta name="guid" content="980c9599-0cb2-a1cc-8322-850700753045" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-3.3.1.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">OpenCvSharp Documented Class Library<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/d69c29a1-7fb1-4f78-82e9-79be971c3d03.htm" title="OpenCvSharp Documented Class Library" tocid="roottoc">OpenCvSharp Documented Class Library</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/1bb515b3-6278-49e4-9a33-1054bd279323.htm" title="OpenCvSharp" tocid="1bb515b3-6278-49e4-9a33-1054bd279323">OpenCvSharp</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/990bb5d8-dead-cb94-4b7c-e92356b50b0c.htm" title="Cv2 Class" tocid="990bb5d8-dead-cb94-4b7c-e92356b50b0c">Cv2 Class</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/6121915d-1174-7345-bdca-789ee1373642.htm" title="Cv2 Methods" tocid="6121915d-1174-7345-bdca-789ee1373642">Cv2 Methods</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/d2b0c30a-6b83-0427-4c4f-a5e98e6b101e.htm" title="EMD Method " tocid="d2b0c30a-6b83-0427-4c4f-a5e98e6b101e">EMD Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/bf839aee-1345-65a9-a3fb-fa2f377a4577.htm" title="EMD Method (InputArray, InputArray, DistanceTypes)" tocid="bf839aee-1345-65a9-a3fb-fa2f377a4577">EMD Method (InputArray, InputArray, DistanceTypes)</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/75eb2f49-c6e4-e831-1e0b-aaf7c69b0e62.htm" title="EMD Method (InputArray, InputArray, DistanceTypes, InputArray)" tocid="75eb2f49-c6e4-e831-1e0b-aaf7c69b0e62">EMD Method (InputArray, InputArray, DistanceTypes, InputArray)</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="../html/980c9599-0cb2-a1cc-8322-850700753045.htm" title="EMD Method (InputArray, InputArray, DistanceTypes, InputArray, Single, OutputArray)" tocid="980c9599-0cb2-a1cc-8322-850700753045">EMD Method (InputArray, InputArray, DistanceTypes, InputArray, Single, OutputArray)</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="logoColumn"><img src="../icons/Help.png" /></td><td class="titleColumn"><h1>Cv2<span id="LST4575D8CC_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4575D8CC_0?cpp=::|nu=.");</script>EMD Method (InputArray, InputArray, DistanceTypes, InputArray, Single<span id="LST4575D8CC_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4575D8CC_1?cpp=%");</script>, OutputArray)</h1></td></tr></table><span class="introStyle"></span> <div class="summary">
             Computes the "minimal work" distance between two weighted point configurations.
            
             The function computes the earth mover distance and/or a lower boundary of the distance between the
             two weighted point configurations.One of the applications described in @cite RubnerSept98,
             @cite Rubner2000 is multi-dimensional histogram comparison for image retrieval.EMD is a transportation
             problem that is solved using some modification of a simplex algorithm, thus the complexity is
             exponential in the worst case, though, on average it is much faster.In the case of a real metric
             the lower boundary can be calculated even faster (using linear-time algorithm) and it can be used
             to determine roughly whether the two signatures are far enough so that they cannot relate to the same object.
             </div><p> </p>
    <strong>Namespace:</strong> 
   <a href="1bb515b3-6278-49e4-9a33-1054bd279323.htm">OpenCvSharp</a><br />
    <strong>Assembly:</strong>
   OpenCvSharp (in OpenCvSharp.dll) Version: 1.0.0<div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Syntax</span></div><div id="ID1RBSection" class="collapsibleSection"><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EDCA_tab1" class="codeSnippetContainerTab"><a href="#" onclick="javascript:ChangeTab('ID0EDCA','cs','1','4');return false;">C#</a></div><div id="ID0EDCA_tab2" class="codeSnippetContainerTab"><a href="#" onclick="javascript:ChangeTab('ID0EDCA','vb','2','4');return false;">VB</a></div><div id="ID0EDCA_tab3" class="codeSnippetContainerTab"><a href="#" onclick="javascript:ChangeTab('ID0EDCA','cpp','3','4');return false;">C++</a></div><div id="ID0EDCA_tab4" class="codeSnippetContainerTab"><a href="#" onclick="javascript:ChangeTab('ID0EDCA','fs','4','4');return false;">F#</a></div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EDCA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EDCA');return false;" title="Copy">Copy</a></div></div><div id="ID0EDCA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="keyword">public</span> <span class="keyword">static</span> <span class="identifier">float</span> <span class="identifier">EMD</span>(
	<span class="identifier">InputArray</span> <span class="parameter">signature1</span>,
	<span class="identifier">InputArray</span> <span class="parameter">signature2</span>,
	<span class="identifier">DistanceTypes</span> <span class="parameter">distType</span>,
	<span class="identifier">InputArray</span> <span class="parameter">cost</span>,
	<span class="keyword">out</span> <span class="identifier">float</span> <span class="parameter">lowerBound</span>,
	<span class="identifier">OutputArray</span> <span class="parameter">flow</span> = <span class="keyword">null</span>
)</pre></div><div id="ID0EDCA_code_Div2" class="codeSnippetContainerCode" style="display: none"><pre xml:space="preserve"><span class="keyword">Public</span> <span class="keyword">Shared</span> <span class="keyword">Function</span> <span class="identifier">EMD</span> ( 
	<span class="parameter">signature1</span> <span class="keyword">As</span> <span class="identifier">InputArray</span>,
	<span class="parameter">signature2</span> <span class="keyword">As</span> <span class="identifier">InputArray</span>,
	<span class="parameter">distType</span> <span class="keyword">As</span> <span class="identifier">DistanceTypes</span>,
	<span class="parameter">cost</span> <span class="keyword">As</span> <span class="identifier">InputArray</span>,
	&lt;<span class="identifier">OutAttribute</span>&gt; <span class="keyword">ByRef</span> <span class="parameter">lowerBound</span> <span class="keyword">As</span> <span class="identifier">Single</span>,
	Optional <span class="parameter">flow</span> <span class="keyword">As</span> <span class="identifier">OutputArray</span> = <span class="keyword">Nothing</span>
) <span class="keyword">As</span> <span class="identifier">Single</span></pre></div><div id="ID0EDCA_code_Div3" class="codeSnippetContainerCode" style="display: none"><pre xml:space="preserve"><span class="keyword">public</span>:
<span class="keyword">static</span> <span class="identifier">float</span> <span class="identifier">EMD</span>(
	<span class="identifier">InputArray</span>^ <span class="parameter">signature1</span>, 
	<span class="identifier">InputArray</span>^ <span class="parameter">signature2</span>, 
	<span class="identifier">DistanceTypes</span> <span class="parameter">distType</span>, 
	<span class="identifier">InputArray</span>^ <span class="parameter">cost</span>, 
	[<span class="identifier">OutAttribute</span>] <span class="identifier">float</span>% <span class="parameter">lowerBound</span>, 
	<span class="identifier">OutputArray</span>^ <span class="parameter">flow</span> = <span class="keyword">nullptr</span>
)</pre></div><div id="ID0EDCA_code_Div4" class="codeSnippetContainerCode" style="display: none"><pre xml:space="preserve"><span class="keyword">static</span> <span class="keyword">member</span> <span class="identifier">EMD</span> : 
        <span class="parameter">signature1</span> : <span class="identifier">InputArray</span> * 
        <span class="parameter">signature2</span> : <span class="identifier">InputArray</span> * 
        <span class="parameter">distType</span> : <span class="identifier">DistanceTypes</span> * 
        <span class="parameter">cost</span> : <span class="identifier">InputArray</span> * 
        <span class="parameter">lowerBound</span> : <span class="identifier">float32</span> <span class="keyword">byref</span> * 
        ?<span class="parameter">flow</span> : <span class="identifier">OutputArray</span> 
(* Defaults:
        <span class="keyword">let </span><span class="identifier">_</span><span class="identifier">flow</span> = defaultArg <span class="identifier">flow</span> <span class="keyword">null</span>
*)
<span class="keyword">-&gt;</span> <span class="identifier">float32</span> 
</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EDCA");</script><h4 class="subHeading">Parameters</h4><dl><dt><span class="parameter">signature1</span></dt><dd>Type: <a href="c2813d63-89b3-a8ae-65cb-953e109cfa20.htm">OpenCvSharp<span id="LST4575D8CC_2"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4575D8CC_2?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>InputArray</a><br />First signature, a \f$\texttt{size1}\times \texttt{dims}+1\f$ floating-point matrix. 
             Each row stores the point weight followed by the point coordinates.The matrix is allowed to have
             a single column(weights only) if the user-defined cost matrix is used.The weights must be non-negative
             and have at least one non-zero value.</dd><dt><span class="parameter">signature2</span></dt><dd>Type: <a href="c2813d63-89b3-a8ae-65cb-953e109cfa20.htm">OpenCvSharp<span id="LST4575D8CC_3"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4575D8CC_3?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>InputArray</a><br />Second signature of the same format as signature1 , though the number of rows
             may be different.The total weights may be different.In this case an extra "dummy" point is added
             to either signature1 or signature2. The weights must be non-negative and have at least one non-zero value.</dd><dt><span class="parameter">distType</span></dt><dd>Type: <a href="96289cb4-0d96-8cf8-1616-57c45d87ad13.htm">OpenCvSharp<span id="LST4575D8CC_4"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4575D8CC_4?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>DistanceTypes</a><br />Used metric.</dd><dt><span class="parameter">cost</span></dt><dd>Type: <a href="c2813d63-89b3-a8ae-65cb-953e109cfa20.htm">OpenCvSharp<span id="LST4575D8CC_5"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4575D8CC_5?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>InputArray</a><br />User-defined size1 x size2 cost matrix. Also, if a cost matrix
             is used, lower boundary lowerBound cannot be calculated because it needs a metric function.</dd><dt><span class="parameter">lowerBound</span></dt><dd>Type: <a href="https://docs.microsoft.com/dotnet/api/system.single" target="_blank">System<span id="LST4575D8CC_6"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4575D8CC_6?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Single</a><span id="LST4575D8CC_7"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4575D8CC_7?cpp=%");</script><br />Optional input/output parameter: lower boundary of a distance between the two
             signatures that is a distance between mass centers.The lower boundary may not be calculated if
             the user-defined cost matrix is used, the total weights of point configurations are not equal, or
             if the signatures consist of weights only(the signature matrices have a single column). You ** must**
             initialize \*lowerBound.If the calculated distance between mass centers is greater or equal to
             \*lowerBound(it means that the signatures are far enough), the function does not calculate EMD.
             In any case \*lowerBound is set to the calculated distance between mass centers on return.
             Thus, if you want to calculate both distance between mass centers and EMD, \*lowerBound should be set to 0.</dd><dt><span class="parameter">flow</span> (Optional)</dt><dd>Type: <a href="99bf1533-7e83-69d2-0c44-691f9635954d.htm">OpenCvSharp<span id="LST4575D8CC_8"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST4575D8CC_8?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>OutputArray</a><br />Resultant size1 x size2 flow matrix: flow[i,j] is  a flow from i-th point of signature1
             to j-th point of signature2.</dd></dl><h4 class="subHeading">Return Value</h4>Type: <a href="https://docs.microsoft.com/dotnet/api/system.single" target="_blank">Single</a><br /><p style="color: #dc143c; font-size: 8.5pt; font-weight: bold;">[Missing &lt;returns&gt; documentation for "M:OpenCvSharp.Cv2.EMD(OpenCvSharp.InputArray,OpenCvSharp.InputArray,OpenCvSharp.DistanceTypes,OpenCvSharp.InputArray,System.Single@,OpenCvSharp.OutputArray)"]</p></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID2RBSection" class="collapsibleSection"><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="990bb5d8-dead-cb94-4b7c-e92356b50b0c.htm">Cv2 Class</a></div><div class="seeAlsoStyle"><a href="d2b0c30a-6b83-0427-4c4f-a5e98e6b101e.htm">EMD Overload</a></div><div class="seeAlsoStyle"><a href="1bb515b3-6278-49e4-9a33-1054bd279323.htm">OpenCvSharp Namespace</a></div></div></div></div><div id="pageFooter" class="pageFooter"> </div></body></html>