<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CvXPhoto.Bm3dDenoising Method (InputArray, OutputArray, Single, Int32, Int32, Int32, Int32, Int32, Int32, Single, NormTypes, Bm3dSteps, TransformTypes)</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="M:OpenCvSharp.XPhoto.CvXPhoto.Bm3dDenoising(OpenCvSharp.InputArray,OpenCvSharp.OutputArray,System.Single,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Int32,System.Single,OpenCvSharp.NormTypes,OpenCvSharp.XPhoto.Bm3dSteps,OpenCvSharp.XPhoto.TransformTypes)" /><meta name="Description" content="Performs image denoising using the Block-Matching and 3D-filtering algorithm (http://www.cs.tut.fi/~foi/GCF-BM3D/BM3D_TIP_2007.pdf) with several computational optimizations.Noise expected to be a gaussian white noise." /><meta name="Microsoft.Help.ContentType" content="Reference" /><meta name="BrandingAware" content="true" /><meta name="container" content="OpenCvSharp.XPhoto" /><meta name="file" content="adfed343-80fb-dc7c-3404-e5a6ab17192b" /><meta name="guid" content="adfed343-80fb-dc7c-3404-e5a6ab17192b" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-3.3.1.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">OpenCvSharp Documented Class Library<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/d69c29a1-7fb1-4f78-82e9-79be971c3d03.htm" title="OpenCvSharp Documented Class Library" tocid="roottoc">OpenCvSharp Documented Class Library</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/c3fbcb91-90da-073c-8bd2-26f012a0851c.htm" title="OpenCvSharp.XPhoto" tocid="c3fbcb91-90da-073c-8bd2-26f012a0851c">OpenCvSharp.XPhoto</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/2c01a650-4b51-42fc-4e5b-d4ea61c1c378.htm" title="CvXPhoto Class" tocid="2c01a650-4b51-42fc-4e5b-d4ea61c1c378">CvXPhoto Class</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/1575b4d6-8c87-95d4-3b0f-6fb9ce7a63e1.htm" title="CvXPhoto Methods" tocid="1575b4d6-8c87-95d4-3b0f-6fb9ce7a63e1">CvXPhoto Methods</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/f9da44fa-7359-efb2-864a-6bce962ebf69.htm" title="Bm3dDenoising Method " tocid="f9da44fa-7359-efb2-864a-6bce962ebf69">Bm3dDenoising Method </a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="../html/adfed343-80fb-dc7c-3404-e5a6ab17192b.htm" title="Bm3dDenoising Method (InputArray, OutputArray, Single, Int32, Int32, Int32, Int32, Int32, Int32, Single, NormTypes, Bm3dSteps, TransformTypes)" tocid="adfed343-80fb-dc7c-3404-e5a6ab17192b">Bm3dDenoising Method (InputArray, OutputArray, Single, Int32, Int32, Int32, Int32, Int32, Int32, Single, NormTypes, Bm3dSteps, TransformTypes)</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/d5dd944e-061b-b514-cbf1-c9c094035e5b.htm" title="Bm3dDenoising Method (InputArray, InputOutputArray, OutputArray, Single, Int32, Int32, Int32, Int32, Int32, Int32, Single, NormTypes, Bm3dSteps, TransformTypes)" tocid="d5dd944e-061b-b514-cbf1-c9c094035e5b">Bm3dDenoising Method (InputArray, InputOutputArray, OutputArray, Single, Int32, Int32, Int32, Int32, Int32, Int32, Single, NormTypes, Bm3dSteps, TransformTypes)</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="logoColumn"><img src="../icons/Help.png" /></td><td class="titleColumn"><h1>CvXPhoto<span id="LST1D148275_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST1D148275_0?cpp=::|nu=.");</script>Bm3dDenoising Method (InputArray, OutputArray, Single, Int32, Int32, Int32, Int32, Int32, Int32, Single, NormTypes, Bm3dSteps, TransformTypes)</h1></td></tr></table><span class="introStyle"></span> <div class="summary">
            Performs image denoising using the Block-Matching and 3D-filtering algorithm 
            (http://www.cs.tut.fi/~foi/GCF-BM3D/BM3D_TIP_2007.pdf) with several computational optimizations.Noise expected to be a gaussian white noise.
            </div><p> </p>
    <strong>Namespace:</strong> 
   <a href="c3fbcb91-90da-073c-8bd2-26f012a0851c.htm">OpenCvSharp.XPhoto</a><br />
    <strong>Assembly:</strong>
   OpenCvSharp (in OpenCvSharp.dll) Version: 1.0.0<div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Syntax</span></div><div id="ID1RBSection" class="collapsibleSection"><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EDCA_tab1" class="codeSnippetContainerTab"><a href="#" onclick="javascript:ChangeTab('ID0EDCA','cs','1','4');return false;">C#</a></div><div id="ID0EDCA_tab2" class="codeSnippetContainerTab"><a href="#" onclick="javascript:ChangeTab('ID0EDCA','vb','2','4');return false;">VB</a></div><div id="ID0EDCA_tab3" class="codeSnippetContainerTab"><a href="#" onclick="javascript:ChangeTab('ID0EDCA','cpp','3','4');return false;">C++</a></div><div id="ID0EDCA_tab4" class="codeSnippetContainerTab"><a href="#" onclick="javascript:ChangeTab('ID0EDCA','fs','4','4');return false;">F#</a></div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EDCA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EDCA');return false;" title="Copy">Copy</a></div></div><div id="ID0EDCA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="identifier">Bm3dDenoising</span>(
	<span class="identifier">InputArray</span> <span class="parameter">src</span>,
	<span class="identifier">OutputArray</span> <span class="parameter">dst</span>,
	<span class="identifier">float</span> <span class="parameter">h</span> = 1f,
	<span class="identifier">int</span> <span class="parameter">templateWindowSize</span> = 4,
	<span class="identifier">int</span> <span class="parameter">searchWindowSize</span> = 16,
	<span class="identifier">int</span> <span class="parameter">blockMatchingStep1</span> = 2500,
	<span class="identifier">int</span> <span class="parameter">blockMatchingStep2</span> = 400,
	<span class="identifier">int</span> <span class="parameter">groupSize</span> = 8,
	<span class="identifier">int</span> <span class="parameter">slidingStep</span> = 1,
	<span class="identifier">float</span> <span class="parameter">beta</span> = 2f,
	<span class="identifier">NormTypes</span> <span class="parameter">normType</span> = <span class="identifier">NormTypes</span>.L2,
	<span class="identifier">Bm3dSteps</span> <span class="parameter">step</span> = <span class="identifier">Bm3dSteps</span>.STEPALL,
	<span class="identifier">TransformTypes</span> <span class="parameter">transformType</span> = <span class="identifier">TransformTypes</span>.HAAR
)</pre></div><div id="ID0EDCA_code_Div2" class="codeSnippetContainerCode" style="display: none"><pre xml:space="preserve"><span class="keyword">Public</span> <span class="keyword">Shared</span> <span class="keyword">Sub</span> <span class="identifier">Bm3dDenoising</span> ( 
	<span class="parameter">src</span> <span class="keyword">As</span> <span class="identifier">InputArray</span>,
	<span class="parameter">dst</span> <span class="keyword">As</span> <span class="identifier">OutputArray</span>,
	Optional <span class="parameter">h</span> <span class="keyword">As</span> <span class="identifier">Single</span> = 1F,
	Optional <span class="parameter">templateWindowSize</span> <span class="keyword">As</span> <span class="identifier">Integer</span> = 4,
	Optional <span class="parameter">searchWindowSize</span> <span class="keyword">As</span> <span class="identifier">Integer</span> = 16,
	Optional <span class="parameter">blockMatchingStep1</span> <span class="keyword">As</span> <span class="identifier">Integer</span> = 2500,
	Optional <span class="parameter">blockMatchingStep2</span> <span class="keyword">As</span> <span class="identifier">Integer</span> = 400,
	Optional <span class="parameter">groupSize</span> <span class="keyword">As</span> <span class="identifier">Integer</span> = 8,
	Optional <span class="parameter">slidingStep</span> <span class="keyword">As</span> <span class="identifier">Integer</span> = 1,
	Optional <span class="parameter">beta</span> <span class="keyword">As</span> <span class="identifier">Single</span> = 2F,
	Optional <span class="parameter">normType</span> <span class="keyword">As</span> <span class="identifier">NormTypes</span> = <span class="identifier">NormTypes</span>.L2,
	Optional <span class="parameter">step</span> <span class="keyword">As</span> <span class="identifier">Bm3dSteps</span> = <span class="identifier">Bm3dSteps</span>.STEPALL,
	Optional <span class="parameter">transformType</span> <span class="keyword">As</span> <span class="identifier">TransformTypes</span> = <span class="identifier">TransformTypes</span>.HAAR
)</pre></div><div id="ID0EDCA_code_Div3" class="codeSnippetContainerCode" style="display: none"><pre xml:space="preserve"><span class="keyword">public</span>:
<span class="keyword">static</span> <span class="keyword">void</span> <span class="identifier">Bm3dDenoising</span>(
	<span class="identifier">InputArray</span>^ <span class="parameter">src</span>, 
	<span class="identifier">OutputArray</span>^ <span class="parameter">dst</span>, 
	<span class="identifier">float</span> <span class="parameter">h</span> = 1f, 
	<span class="identifier">int</span> <span class="parameter">templateWindowSize</span> = 4, 
	<span class="identifier">int</span> <span class="parameter">searchWindowSize</span> = 16, 
	<span class="identifier">int</span> <span class="parameter">blockMatchingStep1</span> = 2500, 
	<span class="identifier">int</span> <span class="parameter">blockMatchingStep2</span> = 400, 
	<span class="identifier">int</span> <span class="parameter">groupSize</span> = 8, 
	<span class="identifier">int</span> <span class="parameter">slidingStep</span> = 1, 
	<span class="identifier">float</span> <span class="parameter">beta</span> = 2f, 
	<span class="identifier">NormTypes</span> <span class="parameter">normType</span> = <span class="identifier">NormTypes</span>::L2, 
	<span class="identifier">Bm3dSteps</span> <span class="parameter">step</span> = <span class="identifier">Bm3dSteps</span>::STEPALL, 
	<span class="identifier">TransformTypes</span> <span class="parameter">transformType</span> = <span class="identifier">TransformTypes</span>::HAAR
)</pre></div><div id="ID0EDCA_code_Div4" class="codeSnippetContainerCode" style="display: none"><pre xml:space="preserve"><span class="keyword">static</span> <span class="keyword">member</span> <span class="identifier">Bm3dDenoising</span> : 
        <span class="parameter">src</span> : <span class="identifier">InputArray</span> * 
        <span class="parameter">dst</span> : <span class="identifier">OutputArray</span> * 
        ?<span class="parameter">h</span> : <span class="identifier">float32</span> * 
        ?<span class="parameter">templateWindowSize</span> : <span class="identifier">int</span> * 
        ?<span class="parameter">searchWindowSize</span> : <span class="identifier">int</span> * 
        ?<span class="parameter">blockMatchingStep1</span> : <span class="identifier">int</span> * 
        ?<span class="parameter">blockMatchingStep2</span> : <span class="identifier">int</span> * 
        ?<span class="parameter">groupSize</span> : <span class="identifier">int</span> * 
        ?<span class="parameter">slidingStep</span> : <span class="identifier">int</span> * 
        ?<span class="parameter">beta</span> : <span class="identifier">float32</span> * 
        ?<span class="parameter">normType</span> : <span class="identifier">NormTypes</span> * 
        ?<span class="parameter">step</span> : <span class="identifier">Bm3dSteps</span> * 
        ?<span class="parameter">transformType</span> : <span class="identifier">TransformTypes</span> 
(* Defaults:
        <span class="keyword">let </span><span class="identifier">_</span><span class="identifier">h</span> = defaultArg <span class="identifier">h</span> 1f
        <span class="keyword">let </span><span class="identifier">_</span><span class="identifier">templateWindowSize</span> = defaultArg <span class="identifier">templateWindowSize</span> 4
        <span class="keyword">let </span><span class="identifier">_</span><span class="identifier">searchWindowSize</span> = defaultArg <span class="identifier">searchWindowSize</span> 16
        <span class="keyword">let </span><span class="identifier">_</span><span class="identifier">blockMatchingStep1</span> = defaultArg <span class="identifier">blockMatchingStep1</span> 2500
        <span class="keyword">let </span><span class="identifier">_</span><span class="identifier">blockMatchingStep2</span> = defaultArg <span class="identifier">blockMatchingStep2</span> 400
        <span class="keyword">let </span><span class="identifier">_</span><span class="identifier">groupSize</span> = defaultArg <span class="identifier">groupSize</span> 8
        <span class="keyword">let </span><span class="identifier">_</span><span class="identifier">slidingStep</span> = defaultArg <span class="identifier">slidingStep</span> 1
        <span class="keyword">let </span><span class="identifier">_</span><span class="identifier">beta</span> = defaultArg <span class="identifier">beta</span> 2f
        <span class="keyword">let </span><span class="identifier">_</span><span class="identifier">normType</span> = defaultArg <span class="identifier">normType</span> <span class="identifier">NormTypes</span>.L2
        <span class="keyword">let </span><span class="identifier">_</span><span class="identifier">step</span> = defaultArg <span class="identifier">step</span> <span class="identifier">Bm3dSteps</span>.STEPALL
        <span class="keyword">let </span><span class="identifier">_</span><span class="identifier">transformType</span> = defaultArg <span class="identifier">transformType</span> <span class="identifier">TransformTypes</span>.HAAR
*)
<span class="keyword">-&gt;</span> <span class="keyword">unit</span> 
</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EDCA");</script><h4 class="subHeading">Parameters</h4><dl><dt><span class="parameter">src</span></dt><dd>Type: <a href="c2813d63-89b3-a8ae-65cb-953e109cfa20.htm">OpenCvSharp<span id="LST1D148275_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST1D148275_1?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>InputArray</a><br />Input 8-bit or 16-bit 1-channel image.</dd><dt><span class="parameter">dst</span></dt><dd>Type: <a href="99bf1533-7e83-69d2-0c44-691f9635954d.htm">OpenCvSharp<span id="LST1D148275_2"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST1D148275_2?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>OutputArray</a><br />Output image with the same size and type as src.</dd><dt><span class="parameter">h</span> (Optional)</dt><dd>Type: <a href="https://docs.microsoft.com/dotnet/api/system.single" target="_blank">System<span id="LST1D148275_3"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST1D148275_3?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Single</a><br />Parameter regulating filter strength. Big h value perfectly removes noise but also 
            removes image details, smaller h value preserves details but also preserves some noise.</dd><dt><span class="parameter">templateWindowSize</span> (Optional)</dt><dd>Type: <a href="https://docs.microsoft.com/dotnet/api/system.int32" target="_blank">System<span id="LST1D148275_4"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST1D148275_4?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Int32</a><br />Size in pixels of the template patch that is used for block-matching. Should be power of 2.</dd><dt><span class="parameter">searchWindowSize</span> (Optional)</dt><dd>Type: <a href="https://docs.microsoft.com/dotnet/api/system.int32" target="_blank">System<span id="LST1D148275_5"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST1D148275_5?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Int32</a><br />Size in pixels of the window that is used to perform block-matching.
             Affect performance linearly: greater searchWindowsSize - greater denoising time. Must be larger than templateWindowSize.</dd><dt><span class="parameter">blockMatchingStep1</span> (Optional)</dt><dd>Type: <a href="https://docs.microsoft.com/dotnet/api/system.int32" target="_blank">System<span id="LST1D148275_6"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST1D148275_6?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Int32</a><br />Block matching threshold for the first step of BM3D (hard thresholding),
            i.e.maximum distance for which two blocks are considered similar.Value expressed in euclidean distance.</dd><dt><span class="parameter">blockMatchingStep2</span> (Optional)</dt><dd>Type: <a href="https://docs.microsoft.com/dotnet/api/system.int32" target="_blank">System<span id="LST1D148275_7"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST1D148275_7?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Int32</a><br />Block matching threshold for the second step of BM3D (Wiener filtering),
            i.e.maximum distance for which two blocks are considered similar. Value expressed in euclidean distance.</dd><dt><span class="parameter">groupSize</span> (Optional)</dt><dd>Type: <a href="https://docs.microsoft.com/dotnet/api/system.int32" target="_blank">System<span id="LST1D148275_8"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST1D148275_8?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Int32</a><br />Maximum size of the 3D group for collaborative filtering.</dd><dt><span class="parameter">slidingStep</span> (Optional)</dt><dd>Type: <a href="https://docs.microsoft.com/dotnet/api/system.int32" target="_blank">System<span id="LST1D148275_9"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST1D148275_9?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Int32</a><br />Sliding step to process every next reference block.</dd><dt><span class="parameter">beta</span> (Optional)</dt><dd>Type: <a href="https://docs.microsoft.com/dotnet/api/system.single" target="_blank">System<span id="LST1D148275_10"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST1D148275_10?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Single</a><br />Kaiser window parameter that affects the sidelobe attenuation of the transform of the 
            window.Kaiser window is used in order to reduce border effects.To prevent usage of the window, set beta to zero.</dd><dt><span class="parameter">normType</span> (Optional)</dt><dd>Type: <a href="aab52304-b80e-e715-4021-82232ddc7834.htm">OpenCvSharp<span id="LST1D148275_11"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST1D148275_11?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>NormTypes</a><br />Norm used to calculate distance between blocks. L2 is slower than L1 but yields more accurate results.</dd><dt><span class="parameter">step</span> (Optional)</dt><dd>Type: <a href="728de3ac-e80d-85a6-1f90-9d701e16cafd.htm">OpenCvSharp.XPhoto<span id="LST1D148275_12"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST1D148275_12?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Bm3dSteps</a><br />Step of BM3D to be executed. Allowed are only BM3D_STEP1 and BM3D_STEPALL. 
            BM3D_STEP2 is not allowed as it requires basic estimate to be present.</dd><dt><span class="parameter">transformType</span> (Optional)</dt><dd>Type: <a href="6a871d33-9005-2d7a-2be8-8be5fa7b46af.htm">OpenCvSharp.XPhoto<span id="LST1D148275_13"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST1D148275_13?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>TransformTypes</a><br />Type of the orthogonal transform used in collaborative filtering step. 
            Currently only Haar transform is supported.</dd></dl></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID2RBSection" class="collapsibleSection"><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="2c01a650-4b51-42fc-4e5b-d4ea61c1c378.htm">CvXPhoto Class</a></div><div class="seeAlsoStyle"><a href="f9da44fa-7359-efb2-864a-6bce962ebf69.htm">Bm3dDenoising Overload</a></div><div class="seeAlsoStyle"><a href="c3fbcb91-90da-073c-8bd2-26f012a0851c.htm">OpenCvSharp.XPhoto Namespace</a></div></div></div></div><div id="pageFooter" class="pageFooter"> </div></body></html>